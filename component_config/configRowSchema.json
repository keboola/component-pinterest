{
  "title": "Pinterest Report",
  "type": "object",
  "required": [
    "input_variant",
    "time_range",
    "destination"
  ],
  "properties": {
    "accounts": {
      "type": "array",
      "title": "Accounts",
      "propertyOrder": 50,
      "description": "Select accounts to be reported",
      "minItems": 1,
      "items": {
        "type": "string",
        "enum": [],
        "minLength": 1,
        "title": "Accounts"
      },
      "format": "select",
      "uniqueItems": true,
      "options": {
        "async": {
          "label": "Load available accounts",
          "action": "load_accounts"
        }
      }
    },
    "input_variant": {
      "type": "string",
      "title": "Report Specification",
      "propertyOrder": 100,
      "description": "You may choose to either define a report or to use existing report template(s)",
      "enum": [
        "report_specification",
        "existing_report_ids"
      ],
      "options": {
        "enum_titles": [
          "Custom Report",
          "Existing report template ID(s)"
        ]
      },
      "default": "report_specification"
    },
    "time_range": {
      "type": "object",
      "title": "Time Range",
      "propertyOrder": 200,
      "properties": {
        "date_from": {
          "type": "string",
          "title": "Date from",
          "default": "7 days ago",
          "propertyOrder": 20,
          "description": "Start date: Either date in YYYY-MM-DD format or a relative date string i.e. 5 days ago, 1 month ago, yesterday, etc."
        },
        "date_to": {
          "type": "string",
          "title": "Date to",
          "default": "today",
          "propertyOrder": 30,
          "description": "End date: Either date in YYYY-MM-DD format or a relative date string i.e. 5 days ago, 1 month ago, yesterday, etc."
        },
        "granularity": {
          "type": "string",
          "title": "Granularity",
          "propertyOrder": 40,
          "description": "Time aggregation",
          "enum": [
            "TOTAL",
            "DAY",
            "HOUR",
            "WEEK",
            "MONTH"
          ],
          "options": {
            "enum_titles": [
              "Total",
              "Day",
              "Hour",
              "Week",
              "Month"
            ]
          }
        }
      }
    },
    "report_specification": {
      "type": "object",
      "title": "Report Details",
      "propertyOrder": 300,
      "properties": {
        "columns": {
          "title": "Columns",
          "type": "array",
          "description": "Select report columns",
          "format": "select",
          "uniqueItems": true,
          "minItems": 1,
          "items": {
            "title": "Column ID",
            "type": "string",
            "enum": [],
            "minLength": 1
          },
          "options": {
            "async": {
              "label": "Load columns",
              "action": "list_columns"
            }
          },
          "propertyOrder": 500
        },
        "level": {
          "title": "Level",
          "type": "string",
          "enum": [
            "ADVERTISER",
            "ADVERTISER_TARGETING",
            "CAMPAIGN",
            "CAMPAIGN_TARGETING",
            "AD_GROUP",
            "AD_GROUP_TARGETING",
            "PIN_PROMOTION",
            "PIN_PROMOTION_TARGETING",
            "KEYWORD",
            "PRODUCT_GROUP",
            "PRODUCT_GROUP_TARGETING",
            "PRODUCT_ITEM"
          ],
          "propertyOrder": 510
        },
        "conversion_window": {
          "title": "Conversion window",
          "type": "string",
          "description": "Identify the attribution window for conversion events (days: click/engagement/view)",
          "default": "30/30/30",
          "enum": [
            "60/60/60",
            "60/60/30",
            "60/60/7",
            "60/60/1",
            "60/30/30",
            "60/30/7",
            "60/30/1",
            "60/7/7",
            "60/7/1",
            "60/1/1",
            "30/30/30",
            "30/30/7",
            "30/30/1",
            "30/7/7",
            "30/7/1",
            "30/1/1",
            "7/7/7",
            "7/1/1",
            "1/1/1"
          ],
          "propertyOrder": 530
        },
        "conversion_report_time": {
          "title": "Conversion Report Time",
          "type": "string",
          "default": "TIME_OF_AD_ACTION",
          "enum": [
            "TIME_OF_AD_ACTION",
            "TIME_OF_CONVERSION"
          ],
          "propertyOrder": 540
        }
      },
      "options": {
        "dependencies": {
          "input_variant": "report_specification"
        }
      }
    },
    "existing_report_ids": {
      "type": "array",
      "title": "Existing Custom Report Template(s)",
      "propertyOrder": 400,
      "minLength": 1,
      "description": "Select custom report template(s) created in the Pinterest Ads Web interface. Optionally, more templates may be selected in case they exist across multiple AD accounts and share the same structure.",
      "format": "select",
      "uniqueItems": true,
      "minItems": 1,
      "items": {
        "title": "Report ID",
        "type": "string",
        "enum": [],
        "minLength": 1
      },
      "options": {
        "dependencies": {
          "input_variant": "existing_report_ids"
        },
        "async": {
          "label": "Load available templates",
          "action": "list_templates"
        }
      }
    },
    "destination": {
      "type": "object",
      "title": "Destination",
      "propertyOrder": 600,
      "required": [
        "table_name",
        "incremental_loading"
      ],
      "properties": {
        "table_name": {
          "type": "string",
          "title": "Storage Table Name",
          "propertyOrder": 10,
          "minLength": 1,
          "description": "Name of the destination table for this report. (e.g. standard_performance_data)."
        },
        "incremental_loading": {
          "enum": [
            false,
            true
          ],
          "type": "boolean",
          "title": "Load Type",
          "default": true,
          "options": {
            "enum_titles": [
              "Full Load",
              "Incremental Load"
            ]
          },
          "description": "If Full load is used, the destination table will be overwritten every run. If Incremental Load is used, data will be upserted into the destination table.",
          "propertyOrder": 30
        }
      }
    }
  }
}
